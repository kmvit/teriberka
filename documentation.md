**Единая Сводная Бизнес-логика Приложения (ТЗ)**

### Судовладелец / Капитан / Турист

#### **1\. Регистрация и Верификация (Модерация)**

| Шаг | Действие Судовладельца | Логика Системы |
| :---- | :---- | :---- |
| **Регистрация** | Указывает email/телефон, создает пароль. | Создается аккаунт со статусом **"На модерации"**. |
| **Загрузка документов** | Загружает фото паспорта, разрешительные документы на судно (ГИМС), страховку, фото судна (3-5 ракурсов). | Документы отправляются Админу на проверку.  |
| **Верификация** | — | Админ проверяет документы. В случае успеха → статус **"Активен"**. В случае отказа → PUSH-уведомление с причиной отказа. |

#### 

#### **2\. Личный Кабинет (Главная Панель)**

Простой, мобильный интерфейс с быстрым доступом к основным метрикам.

* **Главная панель:** Основные показатели на сегодня/неделю.  
* **Календарь бронирований:** Визуализация занятости судна.  
* **Финансы:** Сводка по выплатам (дата следующей выплаты, сумма к получению).  
* **Отзывы и рейтинг:** Видит общую оценку и последние комментарии.  
* **Настройки профиля:** Личные данные, банковские реквизиты.

#### **3\. Работа с Судами и Расписанием**

**Добавление нового судна:**

* **Базовые данные:** Название, Тип (катер, яхта), Вместимость (макс. **11 человек**).  
* **Фото:** Фото галерея (8-12 фото).  
* **Описание:** Особенности, выбираемые из списка **Опций (чекбоксы)**:  
  * Туалет на катере (Да/Нет)  
  * Теплые пледы и дождевики (Да/Нет)  
  * Чай и кофе (Да/Нет)  
  * Удочки для рыбалки (Да/Нет)  
* **Цены:** Стоимость указывается **за человека** для прогулок 2 часа и 3 часа.  
* **Расписание:** Выбор **Даты и времени выхода** (например, 7 ноября с 12:00–14:00).  
* **Маршруты:** Описание зон плавания (маршрутов).

**Управление Расписанием (Календарь):**

* **Блокировка:** Помечает занятые даты и время (техобслуживание, личные планы).  
* **Динамика:** Видит забронированные туристами даты.  
* **Тарифы:** Может устанавливать **сезонные цены** (ручная корректировка базовой цены в зависимости от даты/спроса).  
* **Статистика:** Видит статистику загрузки по месяцам.

#### **4\. Бронирования и Уведомления (Реальное время)**

* **Уведомления:** PUSH-уведомление и сообщение на WhatsApp/Telegram о новой брони сразу после предоплаты.  
* **Лента бронирований:** Подробная информация (см. пример ниже).

### **Пример Бронирования в Ленте**

Дата и время: 22 ноября с 11:00 до 13:00

Мероприятие: Выход в море на поиски китов

Количество людей: 2

Катер: Михаил

Ставка 1 человека: 4 000 ₽

Общая стоимость: 8 000 ₽

Внесена предоплата: 2 000 ₽

Имя гостя: Людмила

Контактный телефон: 89096678984

#### **5\. Финансы и Отчетность**

* **Выплаты:** Выплаты производятся раз в неделю, **каждый понедельник**.  
* **Комиссия:** Комиссия платформы варьируется (10% \- 25%) и рассчитывается автоматически.  
* **Дашборд:** Отображает:  
  * **Выручка** за отчетный период (например, Ноябрь 2025 с 7 \- 14\)  
  * **Комиссия платформы** (-X руб.)  
  * **К выплате** (Чистая сумма)  
* **История операций:** Подробный список всех поступлений и выплат (например, "10.07 \- Выплата \- \+45 000 руб"). Комиссия платформы \- 4500 руб

#### **6\. Обратная Связь и Рейтинг**

* **Отзывы:** Капитан видит отзывы клиентов, может ответить на них.  
* **Рейтинг:** Общий рейтинг в звездах (например, 4.8), основанный на отзывах. ( Если сложно можно перенести на потом реализацию)

---

## **Бизнес-логика Гида (с финансовыми правилами)**

Основная логика для Гида делится на три ключевых этапа: Бронирование (Предоплата), Управление (Отмена) и Финальный Расчет (Остаток).

| Аспект | Правило / Требование | Результат |
| :---- | :---- | :---- |
| **Статус аккаунта** | На модерации | До подтверждения документов |
| **Документы (Обязательно)** | **Свидетельство ИП** или **Справка Самозанятого** | Подтверждение легальной деятельности |
| **Документы (Желательно)** | **Сертификат** или **Удостоверение** об окончании курсов гидов/экскурсоводов (при наличии) | Подтверждение квалификации |
| **Документы (Опыт)** | **Подтверждение опыта** (например, ссылка на активный веб\-сайт / страницу, подтверждающую работу гидом) | Доказательство текущей деятельности |
| **Процесс модерации** | Документы проверяет **Администратор** | — |
| **Успешный результат** | Модерация пройдена | Аккаунту присваивается статус **"Гид Активен"** (открывает дисконт) |

### **1\. Бронирование Группы (Внесение Предоплаты)**

На этом этапе происходит фиксация мест и оплата невозвратного депозита.

| Шаг | Действие Гида | Системная Логика / Расчеты |
| :---- | :---- | :---- |
| **1\. Выбор рейса и количества** | Гид выбирает рейс и вводит **количество билетов (N)** для своей группы. | **Проверка 1:** Наличие свободных мест. **Проверка 2:** Расчет **суммы предоплаты**: N × 1000 руб. |
| **2\. Оплата Предоплаты** | Гид переходит к оплате и вносит сумму предоплаты (1000 руб./чел.) через платежный шлюз. | **Фиксация брони:** Места резервируются. Создается уникальный **ID бронирования**. Статус: **"Активно (Предоплачено)"**. |
| **3\. Расчет остатка** | — | Система рассчитывает **Остаток к оплате**: (Общая стоимость со скидкой – Предоплата). |

### **2\. Управление Бронированием и Политика Отмены**

Правило невозвратной брони интегрируется в статус заказа.

| Условие Отмены | Статус Брони в Приложении | Действие Системы |
| :---- | :---- | :---- |
| **Отмена более чем за 3 суток** | **"Активно (Возвратная)"** | Отмена **доступна**. Гиду **возвращается 100%** внесенной предоплаты (N \* 1000 руб.). |
| **Отмена менее чем за 3 суток (72 часа)** | **"Активно (Невозвратная)"** | Отмена **доступна**. Предоплата **удерживается** и считается **невозвратной**. Бронь закрывается. |
| **Отмена менее чем за 3 часа** | **"Заморожено"** | Отмена **блокируется**. Оплата остатка считается обязательной (см. ниже). |

### **3\. Финальный Расчет и Выход в Море**

Финальная оплата происходит непосредственно перед началом прогулки.

| Время | Действие Гида | Системная Логика / Уведомления |
| :---- | :---- | :---- |
| **За 3 час до выхода** | Гид получает уведомление о необходимости оплатить остаток. | **Расчет:** Система показывает Гиду точную сумму **Остатка к оплате**. |
| **С момента оплаты остатка** | Гид производит оплату оставшейся суммы. | **Обновление:** Статус брони меняется на **"Оплачено полностью"**. Генерируется финальный QR-код для посадки. Или как мы говорили любой понятное для капитана решение, чтоб он знал что этот клиент оплатил  |
| **Посадка (Check-in)** | Гид предъявляет Капитану финальный код. | Капитан сканирует код, система подтверждает: **"Оплачено, N человек, посадка разрешена."** Статус брони меняется на **"Состоялось"**. |

Таким образом, наше приложение защищает интересы владельца судна, удерживая депозит, если отмена происходит в критический для планирования период.

### **Роль III: Стандартный Пользователь (Клиент / Турист)**

| Аспект | Логика |
| :---- | :---- |
| **1\. РЕГИСТРАЦИЯ И ВХОД** |  |
| **Регистрация** | Быстрая регистрация (email ИЛИ телефон) с простой верификацией. Документы не требуются. |
| **2\. ОПЛАТА** |  |
| **Предоплата (Депозит)** | При бронировании вносится **Предоплата 1000 руб. за каждого человека**. |
| **Окончательная оплата** | Остаток полной стоимости оплачивается **за 3 часа до выхода в море**. |
| **3\. ОТМЕНА** |  |
| **Возвратная отмена** | Отмена возможна с полным возвратом предоплаты (1000 руб./чел.), если до рейса **более 72 часов (3 суток)**. |
| **Невозвратный депозит** | Если отмена происходит **менее чем за 72 часа**, внесенная предоплата (1000 руб./чел.) **удерживается** (не возвращается). |
| **Полная невозвратная сумма** | Если отмена происходит **менее чем за 3 часа** до выхода (после дедлайна окончательной оплаты), **вся сумма** (депозит \+ остаток) считается **полностью невозвратной**. |
| **4\. ПОСАДКА** |  |
| **Посадка** | Предъявляет **QR-код  ( это опять же позже реализуем) ИЛИ уникальный ID бронирования** со статусом **ОПЛАЧЕНО** как ты предложил для  Капитана. |

###  **Ключевые Технические Требования**

1. **Акцент на Мобильную Версию:** Весь интерфейс Судовладельца должен быть оптимизирован под телефон (Mobile-first).  
2. **Уведомления в Реальном Времени (PUSH/Telegram/WhatsApp):** Критически важно для предотвращения двойного бронирования и оперативного управления.  
3. **Офлайн-Манифест (QR/ID):** Приложение Капитана должно кэшировать список броней для верификации QR-кодов в условиях отсутствия интернета.  
4. **Простой UI:** Интерфейс Судовладельца должен быть максимально интуитивным, ориентированным на взрослых пользователей.

